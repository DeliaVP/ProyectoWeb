{% extends 'generales/main.html' %}
{% load static %}
{% block content %}
<style>/* Estilo general para el contenedor del formulario */
    .form-container {
        max-width: 600px;
        margin: 0 auto;
        background-color: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        /* Sombra suave para darle profundidad */
    }
    
    /* Estilo para el título */
    h2 {
        font-size: 2rem;
        font-weight: bold;
        color: #343a40;
        margin-bottom: 20px;
    }
    
    /* Estilo para los párrafos */
    p {
        font-size: 1rem;
        color: #6c757d;
    }
    
    /* Estilo general para los labels */
    .form-label {
        font-weight: 600;
        color: #495057;
        margin-bottom: 8px;
        display: block;
    }
    
    /* Estilo de los campos de entrada */
    .form-control {
        width: 100%;
        padding: 12px;
        font-size: 1rem;
        border-radius: 8px;
        border: 1px solid #ced4da;
        margin-bottom: 15px;
        background-color: #f8f9fa;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    
    /* Efecto cuando el campo de entrada está en foco */
    .form-control:focus {
        border-color: #80bdff;
        box-shadow: 0 0 8px rgba(38, 143, 255, 0.25);
        outline: none;
    }
    
    /* Estilo para los botones */
    button[type="submit"] {
        width: 100%;
        padding: 12px;
        background-color: #007bff;
        border: none;
        border-radius: 8px;
        color: white;
        font-size: 1.125rem;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    
    /* Efecto hover para el botón */
    button[type="submit"]:hover {
        background-color: #0056b3;
    }
    
    /* Estilo para los mensajes de error */
    .error-message {
        color: #721c24;
        background-color: #f8d7da;
        padding: 8px;
        border-radius: 5px;
        margin-top: 5px;
        font-size: 0.875rem;
    }
    
    /* Estilo para los mensajes de éxito */
    .alert-success {
        background-color: #d4edda;
        color: #155724;
        padding: 10px;
        border-radius: 5px;
        font-size: 1rem;
    }
    
    /* Estilo para los mensajes generales */
    .messages p {
        margin-top: 10px;
        font-size: 1rem;
        color: #007bff;
    }
    
    /* Asegurarse de que los campos de entrada se alineen bien */
    .form-group {
        margin-bottom: 20px;
    }
    
    /* Estilo para los mensajes de advertencia */
    .alert-warning {
        background-color: #fff3cd;
        color: #856404;
        padding: 10px;
        border-radius: 5px;
        font-size: 1rem;
    }
    
    /* Estilo para los inputs de tipo password */
    input[type="password"] {
        font-size: 1rem;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid #ced4da;
        margin-bottom: 15px;
        background-color: #f8f9fa;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    
    /* Diseño responsive para pantallas pequeñas */
    @media (max-width: 767px) {
        .form-container {
            padding: 20px;
        }
    
        h2 {
            font-size: 1.75rem;
        }
    
        .form-control {
            font-size: 0.875rem;
            padding: 10px;
        }
    
        button[type="submit"] {
            font-size: 1rem;
            padding: 10px;
        }
    }
    
</style>
<div class="form-container">
    <h2>Formulario de Registro</h2>
    <form method="POST" id="registerForm">
        {% csrf_token %}

        <div class="form-group">
            <label for="first_name">First Name:</label>
            <input type="text" name="first_name" id="first_name" required>
            {% if form.first_name.errors %}
            <div class="error-message">{{ form.first_name.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="last_name">Last Name:</label>
            <input type="text" name="last_name" id="last_name" required>
            {% if form.last_name.errors %}
            <div class="error-message">{{ form.last_name.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="dpi">DPI:</label>
            <input type="text" name="dpi" id="dpi" required>
            {% if form.dpi.errors %}
            <div class="error-message">{{ form.dpi.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="birth_date">Birth Date:</label>
            <input type="date" name="birth_date" id="birth_date" required>
            {% if form.birth_date.errors %}
            <div class="error-message">{{ form.birth_date.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="phone">Phone:</label>
            <input type="text" name="phone" id="phone" required>
            {% if form.phone.errors %}
            <div class="error-message">{{ form.phone.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" name="username" id="username" required>
            {% if form.username.errors %}
            <div class="error-message">{{ form.username.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" name="email" id="email" required>
            {% if form.email.errors %}
            <div class="error-message">{{ form.email.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" name="password" id="password" required>
            {% if form.password.errors %}
            <div class="error-message">{{ form.password.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="password_confirmation">Confirm Password:</label>
            <input type="password" name="password_confirmation" id="password_confirmation" required>
            {% if form.password_confirmation.errors %}
            <div class="error-message">{{ form.password_confirmation.errors }}</div>
            {% endif %}
        </div>

        <button type="submit">Register</button>
    </form>

    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <p>{{ message }}</p>
        {% endfor %}
    </div>
    {% endif %}
</div>

<script>
    document.getElementById('registerForm').addEventListener('submit', function(event) {
        const firstName = document.getElementById('first_name').value;
        const lastName = document.getElementById('last_name').value;
        const dpi = document.getElementById('dpi').value;
        const phone = document.getElementById('phone').value;
        const password = document.getElementById('password').value;
        const passwordConfirmation = document.getElementById('password_confirmation').value;

        const nameRegex = /^[a-zA-Z]+$/;
        const numberRegex = /^[0-9]+$/;
        const passwordRegex = /^(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*(),.?":{}|<>]).{12,}$/;

        let errorMessages = [];

        if (!nameRegex.test(firstName)) {
            errorMessages.push('El nombre debe contener solo letras.');
        }

        if (!nameRegex.test(lastName)) {
            errorMessages.push('El apellido debe contener solo letras.');
        }

        if (!numberRegex.test(dpi)) {
            errorMessages.push('El DPI debe contener solo números.');
        }

        if (!numberRegex.test(phone)) {
            errorMessages.push('El teléfono debe contener solo números.');
        }

        if (!passwordRegex.test(password)) {
            errorMessages.push('La contraseña debe tener al menos 12 caracteres, una letra mayúscula, un número y un carácter especial.');
        }

        if (password !== passwordConfirmation) {
            errorMessages.push('Las contraseñas no coinciden.');
        }

        if (errorMessages.length > 0) {
            event.preventDefault();
            let errorHTML = '';
            errorMessages.forEach(function(error) {
                errorHTML += '<p class="error-message">' + error + '</p>';
            });
            document.querySelector('.messages').innerHTML = errorHTML;
        }
    });
</script>

{% endblock content %}